<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>懒加载</title>
	<script src="jquery-3.2.1.min.js"></script>
	<style>
		html,body,ul,li,p,h1,h2,h3,h4,h5,h6 {
                padding:0px;
                margin:0px;
    }
    ul,li {
        list-style:none;
    }
    a {
        text-decoration: none;
    }
    body {
    	width: 100%
        height:100%;
    	background-color: #ddd;
    	font-size: 15px;
    	font-family:'Open Sans Condensed','Arial Narrow',serif;
    	min-width: 700px;

    }
    .container {
    	width: 100%;
    	position: relative;
    }
    #header {
    	margin: 30px 0;
    	text-align: center;
    }
    #header h3 {
    	margin-bottom: 10px;
    	color: rgba(42,23,23,0.43);
    }
    #header p {
    	margin-bottom: 15px;
    	color: rgba(0,0,0,0.39);
    }
    #header ul {
    	width: 100%;
    	margin: 0 auto;
    }
    #header ul li {
    	display: inline-block;
    	height: 20px;
    	line-height: 20px;
    	text-align: center;
    	margin-left: 5px;
    	padding: 5px;
    	border: 1px solid #fff;
    	background-color: rgba(255,0,0,0.02);
    }
    #header ul li a {
    	color:#C6A1A1;
        /*font-style:oblique; */
    }
    #header li:hover {
    	background-color: rgba(255,255,255,0.5);
    }
    .containertwo {
    	width: 100%;
    	
    	text-align: center;

    }
	#lazy {
	margin: 50px auto;
	width: 80%;

	}

	#lazy .in {
		border: 1px solid red;
		margin: 10px;
		text-align: center;
		height: 350px;
		width: 300px;
		display: inline-block;
		overflow: hidden;
	}

	.in img {
		border: none;
		vertical-align: middle;
		height: 100%;
		width: 100%;
		
	}
	</style>
</head>
<body>
<div class="container">
<div id="header">
  <h3>jqurey的常见特效--图片懒加载</h3>
  <p>先加载可视窗口区域的图片，当用户向下拖动滚动条时再继续加载后面的图片</p>
  <ul>
    <li><a href="jquery.html">懒加载</a></li>
    <li><a href="jquery2.html">tab切换</a></li>     	
    <li><a href="jquery3.html">瀑布流布局</a></li>     	
    <li><a href="jquery4.html">回到顶部</a></li>     	
    <li><a href="jquery5.html">固定顶部</a></li>     	
  </ul>
</div>
<div class="containertwo">
<ul id="lazy">
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
  <li class="in"><img src="" data-imgurl="image/01.jpg"></li>
 </ul>
 </div>
</div>

<!-- <script type="text/javascript">
  var aImages = document.getElementById("lazy").getElementsByTagName('img'); //获取id为lazy的文档内所有的图片
  loadImg(aImages);
  window.onscroll = function() { //滚动条滚动触发
  loadImg(aImages);
  };
  //getBoundingClientRect 是图片懒加载的核心
  function loadImg(arr) {
  for(var i = 0, len = arr.length; i < len; i++) {
   if(arr[i].getBoundingClientRect().top < document.documentElement.clientHeight && !arr[i].isLoad) {
   arr[i].isLoad = true; //图片显示标志位
   //arr[i].style.cssText = "opacity: 0;"; 
   (function(i) {
    setTimeout(function() {
    if(arr[i].dataset) { //兼容不支持data的浏览器
     aftLoadImg(arr[i], arr[i].dataset.imgurl);
    } else {
     aftLoadImg(arr[i], arr[i].getAttribute("data-imgurl"));
    }
    arr[i].style.cssText = "transition: 1s; opacity: 1;" //相当于fadein
    }, 500)
   })(i);
   }
  }
  }
 
  function aftLoadImg(obj, url) {
  var oImg = new Image();
  oImg.onload = function() {
   obj.src = oImg.src; //下载完成后将该图片赋给目标obj目标对象
  }
  oImg.src = url; //oImg对象先下载该图像
  }
 </script> -->

<!--  用jquery方法 -->
  <script>
   $(function(){
    var a= parseInt($(window).height());
     $('img').each(function(i){
                var imgTop = parseInt($('img').eq(i).offset().top);
                if(imgTop<=a){
                    $('img').eq(i).attr('src',$('img').eq(i).attr('data-imgurl'));
                }
            })
        $(document).scroll(function(){
            var scrollTop = parseInt($(document).scrollTop());
            $('img').each(function(i){
                var imgTop = parseInt($('img').eq(i).offset().top);
                if(imgTop<=scrollTop+450){
                    $('img').eq(i).attr('src',$('img').eq(i).attr('data-imgurl'));
                }
            })
        });
    })
 </script>
</body>
</html>